pval <- t.test(x, y, var.equal = TRUE)$p.value
tibble(n_var = i, total_tests = total_tests, iteration = j, truth = truth[k], p = pval)
}) %>% list_rbind()
}) %>% list_rbind()
}) %>% list_rbind()
results
}
#| eval: FALSE
generate_mixed_draws <- function(n = 50, mu_null = 0, mu_alt = 0.5, sd = 1, probs = c(0.8, 0.2)) {
n_var <- seq(3,24,4)
results <- map(n_var, \(i) {
total_tests <- (i * (i - 1) / 2)
n_H0 <- round(total_tests * probs[1])
n_H1 <- total_tests - n_H0
truth <- c(rep("H0_true", n_H0), rep("H1_true", n_H1))
map(1:100, \(j) {
map(1:total_tests, \(k) {
if (truth[k] == "H0_true") {
x <- rnorm(n, mean = mu_null, sd = sd)
y <- rnorm(n, mean = mu_null, sd = sd)
} else {
x <- rnorm(n, mean = mu_null, sd = sd)
y <- rnorm(n, mean = mu_alt, sd = sd)
}
pval <- t.test(x, y, var.equal = TRUE)$p.value
tibble(n_var = i, total_tests = total_tests, iteration = j, truth = truth[k], p = pval)
}) %>% list_rbind()
}) %>% list_rbind()
}) %>% list_rbind()
results
}
results <- generate_mixed_draws()
generate_mixed_draws <- function(n = 50, mu_null = 0, mu_alt = 0.5, sd = 1, probs = c(0.8, 0.2)) {
n_var <- seq(3,24,4)
results <- map(n_var, \(i) {
total_tests <- (i * (i - 1) / 2)
n_H0 <- round(total_tests * probs[1])
n_H1 <- total_tests - n_H0
truth <- c(rep("H0_true", n_H0), rep("H1_true", n_H1))
map(1:10, \(j) {
map(1:total_tests, \(k) {
if (truth[k] == "H0_true") {
x <- rnorm(n, mean = mu_null, sd = sd)
y <- rnorm(n, mean = mu_null, sd = sd)
} else {
x <- rnorm(n, mean = mu_null, sd = sd)
y <- rnorm(n, mean = mu_alt, sd = sd)
}
pval <- t.test(x, y, var.equal = TRUE)$p.value
tibble(n_var = i, total_tests = total_tests, iteration = j, truth = truth[k], p = pval)
}) %>% list_rbind()
}) %>% list_rbind()
}) %>% list_rbind()
results
}
results <- generate_mixed_draws()
results
#| eval: FALSE
calc_disc_rate_adj <- function(results,method) {
results %>% group_by(n_var, iteration) %>%
mutate(p_adj = p.adjust(p, method = method),
type_I = case_when(truth == "H0_true" & p_adj <= 0.05 ~ 1,
.default = 0),
true_pos = case_when(truth == "H1_true" & p_adj <= 0.05 ~ 1,
.default = 0)
) %>%
group_by(total_tests, iteration) %>%
summarise(any_type_I = any(type_I == 1), n_type_I = sum(type_I), power = sum(true_pos)/n()*100, .groups = "drop") %>%
group_by(total_tests) %>%
summarise(
fwer = mean(any_type_I),
mean_n_type_I = mean(n_type_I),
mean_power = mean(power),
.groups = "drop"
)
}
#| eval: FALSE
methods <- c("none","bonferroni", "BH") %>% set_names()
fwer_correction <- map(methods, \(m) {
calc_disc_rate_adj(results,m)
}) %>% list_rbind(names_to = "method")
fwer_correction_long <- fwer_correction %>%  pivot_longer(
cols = c(fwer, mean_n_type_I, mean_power),
names_to = "metric",
values_to = "value"
)
#| eval: FALSE
ggplot(fwer_correction_long, aes(x = total_tests, y = value, color = method)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
facet_wrap(~ metric, scales = "free_y", ncol = 1,
labeller = as_labeller(c(
fwer = "Familywise Error Rate",
mean_n_type_I = "Number of Type I Errors",
mean_power = "Power (%)"
))) +
scale_color_brewer(palette = "Dark2") +
labs(
x = "Number of tests",
y = "Value",
color = "Correction Method",
) +
theme_minimal(base_size = 14) +
theme(
legend.position = "top",
strip.text = element_text(face = "bold"),
panel.grid.minor = element_blank()
)
#| eval: FALSE
ggplot(fwer_correction_long, aes(x = total_tests, y = value, color = method)) +
geom_line(linewidth = 1) +
geom_point(size = 2) +
facet_wrap(~ metric, scales = "free_y", ncol = 1,
labeller = as_labeller(c(
fwer = "Familywise Error Rate",
mean_n_type_I = "Number of Type I Errors",
mean_power = "Power (%)"
))) +
scale_color_brewer(palette = "Dark2") +
labs(
x = "Number of tests",
y = "Value",
color = "Correction Method",
) +
theme_minimal(base_size = 14) +
theme(
legend.position = "top",
strip.text = element_text(face = "bold"),
panel.grid.minor = element_blank()
)
ps <- tibble(p_values = c(0.31, 0.27, 0.04, 0.58))
p.adj(ps,method="BH")
p.adjust(ps,method="bh")
p.adjust(ps,method="BH")
ps
p.adjust(ps$p_values,method="BH")
#| eval: false
ps %>%
arrange(p_values) %>%
mutate(rank = row_number())
#| eval: false
ps %>%
arrange(p_values) %>%
mutate(rank = row_number(),
b = p_values * (n() / rank))
#| eval: false
ps %>%
arrange(p_values) %>%
mutate(rank = row_number(),
b = p_values * (n() / rank),
p_fdr_adj = case_when(rank == 4 ~ min(b[4]),
rank == 3 ~ min(b[3:4]),
rank == 2 ~ min(b[2:4]),
rank == 1 ~ min(b[1:4])))
read_csv("Session-3_files/example1.csv", skip = 2, na = "missing") |>
janitor::clean_names() %>%
mutate(measure_1 = parse_number(measure_1),
age = parse_number(if_else(age == "eleven", "11", age)))
library(nycflights13)
library(tidyverse)
library(palmerpenguins)
penguins |>
pivot_longer(cols = c(bill_length_mm, body_mass_g, flipper_length_mm),
names_to = "measure",
values_to = "values") |>
ggplot(aes(y = values,
x = species,
fill = species)) +
geom_boxplot() +
facet_wrap(~measure, scale = "free") +
labs(x = NULL)
flights |>
pivot_longer(cols = c(dep_delay, arr_delay),
names_to = "type",
values_to = "delay") |>
ggplot(aes(y = delay,
x = carrier)) +
geom_boxplot(outliers = FALSE) +
facet_wrap(~type)
ex3 <- tibble(column = rep(c("x", "y", "z"), each = 10),
values = c(4.2, 5.1, 7.1, 2.1, 7.2, 8.1, 2.2, 8.2, 9.1, 10,
7.3, 7.4, 8.3, 9.2, 2.3, 1.2, 8.5, 9.4, 12.4, 1.5,
8.9, 2.7, 1.4, 7.7, 3.4, 8.7, 9.5, 0.8, 2.9, 9.9),
ID = rep(paste0("ID_", 1:10), 3))
library(dplyr)
library(smacpod)
install.packages(smacpod)
install.packages("smacpod")
library(smacpod)
library(combinat)
ori <- data.frame(0,0)
deff <- function(n,rIn,rIn1, con) {
In1 <- data.frame()
for (i in 1:(2*n)){
if (i%%2 != 0) {
In1[i,1] <- rIn*cos(i*pi/n) + con[,1]
In1[i,2] <- rIn*sin(i*pi/n) + con[,2]
In1[i,3] <- rIn1
}
else {
}
}
In1xy <- data.frame(In1) %>% na.omit()
return(In1xy)
}
ori <- data.frame(0,0)
deff <- function(n,rIn,rIn1, con) {
In1 <- data.frame()
for (i in 1:(2*n)){
if (i%%2 != 0) {
In1[i,1] <- rIn*cos(i*pi/n) + con[,1]
In1[i,2] <- rIn*sin(i*pi/n) + con[,2]
In1[i,3] <- rIn1
}
else {
}
}
In1xy <- data.frame(In1) %>% na.omit()
return(In1xy)
}
orb <- function(sol, n1, n2, n3, n4){
orbxy <- data.frame()
orb1xy <- data.frame()
orb2xy <- data.frame()
orb3xy <- data.frame()
orb4xy <- data.frame()
ori <- data.frame(0,0)
## Solar circle
if (sol == TRUE) {
circ1 <- deff(5,0,0.7, ori)
} else {circ1 <- deff(5,0,0,ori)}
for (j in 1:length(n1[,2])) {
if (sol == TRUE) {orb1xy[j,1:3] <- deff(n1[j,4], 0.7, n1[j,5], con = circ1[1,1:2])[(n1[j,2]),1:3]}
else{orb1xy[j,1:3] <- deff(n1[j,4], 0, n1[j,5], con = circ1[1,1:2])[(n1[j,2]),1:3]}
for (k in 1:length(n2[,2])) {
orb2xy[k,1:3] <- deff(n2[k,4], orb1xy[n2[k,3],3], n2[k,5], con = orb1xy[n2[k,3],1:2])[(n2[k,2]),1:3]
if (missing(n3) == FALSE) {
for (l in 1:length(n3[,2])) {
orb3xy[l,1:3] <- deff(n3[l,4], orb2xy[n3[l,3],3], n3[l,5], con = orb2xy[n3[l,3],1:2])[(n3[l,2]),1:3]
if (missing(n4) == FALSE) {
for (m in 1:length(n4[,2])) {
orb4xy[m,1:3] <- deff(n4[m,4], orb3xy[n4[m,3],3], n4[m,5], con = orb3xy[n4[m,3],1:2])[n4[m,2],1:3]
}
}
}
}
}
}
orbxy <- rbind(orb1xy,orb2xy,orb3xy,orb4xy)
if (sol == TRUE) {  c <- cbind(c(0,orbxy[1:length(orbxy[,1]),1]),
c(0,orbxy[1:length(orbxy[,1]),2]))
r1 <- c(0.7,orbxy[1:length(orbxy[,1]),3])}
else{  c <- cbind(c(orbxy[1:length(orbxy[,1]),1]),
c(orbxy[1:length(orbxy[,1]),2]))
r1 <- c(orbxy[1:length(orbxy[,1]),3])}
plot <- circles.plot(c,r1,xlim = c(-1,1),ylim = c(-1,1.5),clwd = 3,nv=1000,axes = FALSE,xlab = "",ylab = "",add = F)
return(plot)
return(orbxy)
}
perm <- combn(letters[1:4], 3)
combn(10, 5, min)
x <- combn(c(rep(1,length.out = 1),rep(2,length.out = 3),rep(3, length.out = 9), rep(4, length.out = 18)), 5, tabulate, nbins = 4, simplify = TRUE)
combn
n1 <- data.frame(1,1,1,2,0.4)
n2 <- data.frame(c(1,2,3,4),c(1,2,3,4),c(1,1,1,1),c(4,4,4,4),c(0.15,0.2,0.12,0.3))
n3 <- data.frame(c(1,2,3,4,5),c(3,2,1,1,2),c(1,1,2,3,3),c(3,3,3,3,3),c(0.12,0.12,0.12,0.1,0.1))
n4 <- data.frame(c(1,2,3,4,5),c(1,2,1,2,2),c(1,2,3,3,5),c(3,3,3,3,3),c(0.05,0.05,0.05,0.05,0.05))
test <- orb(sol = F, n1,n2,n3,n4)
x <- seq(from=21.6, to=22, by=0.01)
y <- seq(from=58.77, to=58.93, by=0.01)
expand.grid(x,y)
test <- orb(sol = F, n1,n2,n3,n4)
x <- seq(from=21.6, to=22, by=0.01)
y <- seq(from=58.77, to=58.93, by=0.01)
expand.grid(x,y)
d1 <- tibble(part = c("a","a","b","b","c"), session=c(1,2,1,2,1), block = c(3,2,1,4,3))
library(tidyverse)
d1 %>% left_join(d3,join_by(part))
d1 <- tibble(part = c("a","a","b","b","c"), session=c(1,2,1,2,1))
d2 <- tibble(part = c("a","a","b","b","c"),
session=c(1,2,1,2,1),
block= c(4,2,3,1))
d2 <- tibble(part = c("a","a","b","b","c"),
session=c(1,2,1,2,1),
block= c(4,2,3,1,2))
d3 <- tibble(block = c(1,2,3,4),movies=c("mov1","mov2","mov3","mov4"))
d1 %>% left_join(d3,join_by(part))
d1 %>% left_join(d3,by=part)
d1 %>% left_join(d2,by=part)
d1 %>% left_join(d2,join_by(part))
d1 %>% left_join(d2,join_by(part,session))
d1 %>% left_join(d2,join_by(part,session)) %>% left_join(d3,join_by(block))
d1 <- tibble(part = c("a","a","a","a","b","b","c"), session=c(1,1,2,2,1,2,1))
d2 <- tibble(part = c("a","a","b","b","c"),
session=c(1,2,1,2,1),
block= c(4,2,3,1,2))
d3 <- tibble(block = c(1,2,3,4),movies=c("mov1","mov2","mov3","mov4"))
d1 %>% left_join(d2,join_by(part,session)) %>% left_join(d3,join_by(block))
d1 <- tibble(part = c("a","a","a","a","b","b","c"), session=c(1,1,2,2,1,2,1))
d2 <- tibble(part = c("a","a","b","b","c"),
session=c(1,1,1,2,1),
block= c(4,2,3,1,2))
d3 <- tibble(block = c(1,2,3,4),movies=c("mov1","mov2","mov3","mov4"))
d1 %>% left_join(d2,join_by(part,session)) %>% left_join(d3,join_by(block))
d2 <- tibble(part = c("a","a","b","b","c"),
session= c(1,2,1,2,1))
d3 <- tibble(session = c(1,1,2,2), block = c(1,2,1,2) = movies=c("mov1","mov2","mov3","mov4"))
d2 <- tibble(part = c("a","a","b","b","c"),
session= c(1,2,1,2,1))
d3 <- tibble(session = c(1,1,2,2), block = c(1,2,1,2), movies=c("mov1","mov2","mov3","mov4"))
d1 %>% left_join(d2,join_by(part,session)) %>% left_join(d3,join_by(block))
d2 %>% left_join(d3,join_by(session))
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(participant,block))
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block))
d1 <- tibble(part = c("a","a","a","a","b","b","c"), block=c(4,2,1,3,1,2,1))
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block))
d1 <- tibble(part = c("a","a","a","a","b","b","c"), block=c(1,2,1,2,1,2,1))
d2 <- tibble(part = c("a","a","b","b","c"),
session= c(1,2,1,2,1))
d3 <- tibble(session = c(1,1,2,2), block = c(1,2,1,2), movies=c("mov1","mov2","mov3","mov4"))
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block))
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block),relationship = 'many-to-many')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many')
d1 %>% left_join(d2,join_by(part),relationship = 'many-to-many')
d1 %>% left_join(d2,join_by(part))
d1 <- tibble(part = c("a","a","a","a","b","b","c"), block=c(1,2,1,2,1,2,1))
d3 <- tibble(session = c(1,1,2,2), block = c(1,2,1,2), movies=c("mov1","mov2","mov3","mov4"))
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block),relationship = 'many-to-many')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block),relationship = 'one-to-many')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-one') %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(session),relationship = 'one-to-many')
d2 %>% left_join(d3,join_by(session),relationship = 'many-to-many')
d1 <- tibble(part = c("a","a","a","a","b","b","c"), block=c(1,2,2,4,1,3,2))
d2 <- tibble(part = c("a","a","b","b","c"),
session= c(1,1,2,2,1,1,1),
block = c(1,2,2,4,1,3,2))
d2 <- tibble(part = c("a","a","a","a","b","b","c"),
session= c(1,1,2,2,1,1,1),
block = c(1,2,2,4,1,3,2))
d3 <- tibble(block = c(1,2,3,4), movies=c("mov1","mov2","mov3","mov4"))
d2 %>% left_join(d3,join_by(block),relationship = 'many-to-many') %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(block)) %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(block))
d2 %>% left_join(d3,join_by(block)) %>% left_join(d1,join_by(part,session,block),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(block))
d2 %>% left_join(d3,join_by(block))
d2 %>% left_join(d3,join_by(block)) %>% left_join(d1,join_by(part,session,block))
d2 %>% left_join(d3,join_by(block)) %>% left_join(d1,join_by(part,block))
d2 %>% left_join(d3,join_by(block))
d2 %>% left_join(d3,join_by(block)) %>% left_join(d1,join_by(part,block)),relationship = 'many-to-one')
d2 %>% left_join(d3,join_by(block)) %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
d1 %>% left_join(d2,join_by(part,block))
d1 <- tibble(part = c("a","a","a","a","b","b","c"), block=c(1,2,3,4,1,3,2))
d2 <- tibble(part = c("a","a","a","a","b","b","c"),
session= c(1,1,2,2,1,1,1),
block = c(1,2,2,4,1,3,2))
d3 <- tibble(block = c(1,2,3,4), movies=c("mov1","mov2","mov3","mov4"))
d1 %>% left_join(d2,join_by(part,block)) %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
d2 <- tibble(part = c("a","a","a","a","b","b","c"),
session= c(1,1,2,2,1,1,1),
block = c(1,2,3,4,1,3,2))
d3 <- tibble(block = c(1,2,3,4), movies=c("mov1","mov2","mov3","mov4"))
d1 %>% left_join(d2,join_by(part,block)) %>% left_join(d1,join_by(part,block),relationship = 'many-to-one')
read_excel
library(readxl)
read_excel(r"C:\Users\cgibeil@emory.edu\OneDrive - Emory\Documents\Side projects\toy_data\asd_stats-ET.xlsx")
?read_excel
read_excel(r"C:\Users\cgibeil@emory.edu\OneDrive - Emory\Documents\Side projects\toy_data\asd_stats-ET.xlsx",skip=23)
read_excel(r"C:\Users\cgibeil@emory.edu\OneDrive - Emory\Documents\Side projects\toy_data\asd_stats-ET.xlsx",skip=24)
read_excel(r"C:\Users\cgibeil@emory.edu\OneDrive - Emory\Documents\Side projects\toy_data\asd_stats-ET.xlsx",skip=25)
read_excel(r"C:\Users\cgibeil@emory.edu\OneDrive - Emory\Documents\Side projects\toy_data\asd_stats-ET.xlsx",skip=30)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=24)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx")
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx")
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx")
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=24)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=25)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=22)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=22)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=22)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
janitor
library(janitor)
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
ET
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names()
ET
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_match(subject, "\d+"))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_match(subject, "\\d+"))
ET
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_match(subject, "\\D+"))
ET
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_match(subject, "\\d+"))
ET
str_match(subject, "\\d+")
str_match(ET$subject, "\\d+")
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names()
ET
ET %>%  mutate(subject = str_match(subject, "\\d+"))
ET %>%  mutate(subject2 = str_match(subject, "\\d+"))
v <- ET %>%  mutate(subject2 = str_match(subject, "\\d+"))
v$subject2
v <- ET %>%  mutate(subject2 = str_replace(subject, "\\D+",""))
v
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+"))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
ET
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx")
block_mov
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx") %>% mutate(movie =  str_replace(movie, "\\..*",""))
block_mov
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")
block_session
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx") %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_Session
block_session
block_session_mov <- block_mov %>% left_join(block_session,join_by(block))
block_mov
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx") %>% clean_names() %>% mutate(movie =  str_replace(movie, "\\..*",""))
block_session_mov <- block_mov %>% left_join(block_session,join_by(block))
block_session_mov
block_session_mov <- block_mov %>% right_join(block_session,join_by(block))
block_session_mov
block_session_mov <- block_session %>% left_join(block_mov,join_by(block))
block_session_mov
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(participant,block))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
block_session_mov
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=movie)) +
geom_dotplot()
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=movie)) +
geom_point()
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=movie)) +
geom_point()
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_point()
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_point() +
facet_grid(rows = movie)
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_point() +
facet_grid(rows = movies)
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_point() +
facet_grid(rows = vars(movies))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_point() +
facet_grid(rows = vars(movie))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(movie))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx") %>% clean_names() %>% mutate(movie =  str_replace(movie, "\\..*",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
block_session_mov
print(block_session_mov,n=200)
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx") %>% clean_names() %>% mutate(movie =  str_replace(movie, "\\..*",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx") %>% clean_names() %>% mutate(movie =  str_replace(movie, "\\..*",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_mov <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_movie-correspondence.xlsx") %>% clean_names() %>% mutate(movie =  str_replace(movie, "\\..*",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23) %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session <-  read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\block_session-sequence.xlsx")  %>% clean_names() %>% mutate(subject = str_replace(subject, "^\\D+",""))
block_session_mov <- block_session %>% left_join(block_mov,join_by(block)) %>% left_join(ET, join_by(subject,block))
ggplot(block_session_mov,aes(x=x_pos,y=y_pos,group=subject,color=subject)) +
geom_line() +
facet_grid(rows = vars(block))
read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
ET <- read_excel("C:\\Users\\cgibeil@emory.edu\\OneDrive - Emory\\Documents\\Side projects\\toy_data\\asd_stats-ET.xlsx",skip=23)
ET %>% rename(str_replace(colnames(ET),"\\s","_")
)
str_replace(colnames(ET),"\\s","_")
ET %>% rename(colnames(ET),str_replace(colnames(ET),"\\s","_")
)
